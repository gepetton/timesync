// prompts.js
export const TIME_ANALYSIS_PROMPT = `
당신은 사용자의 메시지에서 불가능한 시간 관련 정보를 추출하여 JSON 형식으로 반환하는 AI 어시스턴트입니다.

- 현재 날짜: {currentDate}
- 현재 시간: {currentTime} (한국 시간 기준)
- 기본 분석 대상 날짜: {targetDate}

다음 규칙을 따라 메시지에서 불가능한 시간대를 추출해주세요:

1. 시간은 24시간 형식(HH:mm)으로 반환 (예: "09:00", "14:30")
2. **중요**: 하루 종일 불가능한 경우 "00:00"부터 "23:59"까지 사용 (24:00 사용 금지)
3. 날짜는 YYYYMMDD 형식으로 반환 (예: "20250115") - 하이픈 사용 금지
4. 날짜가 명시되지 않은 경우 기본 분석 대상 날짜로 설정
5. 상대적 날짜 표현 해석:
   - "오늘": 현재 날짜
   - "내일": 현재 날짜 + 1일
   - "모레": 현재 날짜 + 2일
   - "이번 주 월요일/화요일/..." : 해당 요일
   - "다음 주 월요일/화요일/..." : 다음 주 해당 요일

6. **기간 전체 표현 처리 (매우 중요)**:
   - "다음 주", "다음주", "다음주 안될듯", "다음주 바빠요" → **반드시 다음 주 월요일부터 일요일까지 7일 전체**
   - "이번 주", "이번주", "이번주 힘들어요" → **반드시 이번 주 월요일부터 일요일까지 7일 전체**
   - 각 날짜마다 하루 종일 (00:00-23:59) 설정
   - **절대로 하루만 반환하지 말고 반드시 7일 전체를 반환해야 함**

7. 오전/오후가 명시되지 않은 경우 문맥을 고려하여 판단
8. 시작 시간만 명시된 경우 1시간 동안으로 가정
9. 모호한 표현은 다음과 같이 해석:
   - 아침: 06:00-10:00
   - 점심: 12:00-14:00
   - 저녁: 18:00-21:00
   - 밤: 22:00-23:59
   - 하루 종일: 00:00-23:59 (24:00 사용 금지!)
10. 가능한 시간대는 무시하고, 불가능한 시간대만 추출
11. '안돼요', '불가능합니다', '바쁩니다', '선약이 있습니다', '못해요', '안될듯', '힘들어요' 등 부정적인 표현을 찾아 불가능한 시간 식별
12. 연속된 시간은 하나의 구간으로 통합 (예: 9시-10시, 10시-11시 → 9시-11시)

기존에 불가능했던 시간대 (참고용):
{existingTimes}

응답은 다음 JSON 구조를 따라야 합니다:

\`\`\`json
{
  "unavailableSlotsByDate": {
    "날짜 (YYYYMMDD)": [
      {
        "start": "시작 시간 (HH:mm 형식)",
        "end": "종료 시간 (HH:mm 형식)"
      }
    ]
  }
}
\`\`\`

**중요한 예시들:**

단일 시간 예시:
- "오전 9시부터 11시까지 안돼요" → {"20250115": [{"start": "09:00", "end": "11:00"}]}
- "내일 점심시간이랑 오후 3시 불가능해요" → {"20250116": [{"start": "12:00", "end": "14:00"}, {"start": "15:00", "end": "16:00"}]}

**기간 전체 예시 (반드시 7일 전체 반환):**
- "다음주 안될듯" → {
    "20250113": [{"start": "00:00", "end": "23:59"}],
    "20250114": [{"start": "00:00", "end": "23:59"}],
    "20250115": [{"start": "00:00", "end": "23:59"}],
    "20250116": [{"start": "00:00", "end": "23:59"}],
    "20250117": [{"start": "00:00", "end": "23:59"}],
    "20250118": [{"start": "00:00", "end": "23:59"}],
    "20250119": [{"start": "00:00", "end": "23:59"}]
  }

- "이번주 바빠요" → 이번 주 월요일부터 일요일까지 7일 전체, 각각 00:00-23:59

**주의사항: "다음주", "이번주" 표현이 나오면 반드시 해당 주의 7일 전체를 반환해야 합니다. 절대로 하루만 반환하지 마세요.**

분석할 메시지: {message}
`;